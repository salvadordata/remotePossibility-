env:m5stack-core2]
platform = espressif32
board = m5stack-core2
framework = arduino
monitor_speed = 115200           ; Set the baud rate for the serial monitor
upload_speed = 921600            ; Speed for uploading code to the board (max for faster uploads)
build_type = debug               ; Set this to 'debug' for easier troubleshooting, or 'release' for production

; Library dependencies
lib_deps = 
  m5stack/M5Unified @ ^1.1.2     ; M5 Unified library for M5Stack Core2
  IRremote                       ; Library for handling IR signals (IRremote for ESP32)
  nRF24                          ; RF24 library for NRF24L01+ communication
  SD                             ; SD card library for ESP32
  SPI                            ; SPI communication for SD and RF24 libraries

; Compiler and Build Flags
build_flags = 
  -DARDUINO_M5STACK_CORE2        ; Define flag for targeting M5Stack Core2 hardware
  -DESP32                        ; Define ESP32 as the target chip
  -Werror                        ; Treat all warnings as errors (enforces stricter code quality)
  -Wall                          ; Enable all compiler warnings
  -Os                            ; Optimize for smaller binary size
  -DCORE_DEBUG_LEVEL=5           ; Enable full debugging output
  -DDEBUG_ESP_PORT=Serial        ; Debugging will output over the Serial port

; File system partition scheme
board_build.partitions = huge_app.csv ; Use large partition table, useful for larger apps

; Custom library directories
lib_extra_dirs = 
  ~/Documents/PlatformIO/Projects/libs  ; Add custom libraries not managed by PlatformIO

; Serial port settings
upload_protocol = esptool         ; Protocol for uploading firmware
upload_port = COM3                ; Update this to the correct port for your setup
monitor_port = COM3               ; The same port used for serial monitoring

; Additional Board Configurations
board_build.f_cpu = 240000000L    ; Set CPU frequency to 240MHz for higher performance
board_build.flash_size = 4MB      ; Set flash size to 4MB, standard for most M5Stack boards
board_build.filesystem = spiffs   ; Use SPIFFS as the filesystem for onboard storage

; Manage platform and framework versions
platform_packages = 
  framework-arduinoespressif32 @ https://github.com/espressif/arduino-esp32.git#2.0.9  ; Pin specific version for stability

; Debugging toolchain
debug_tool = esp-prog              ; Set ESP-Prog as the debugging tool
debug_init_break = tbreak setup    ; Breakpoint at the beginning of `setup()`
debug_speed = 5000                 ; Set debugging speed (adjust if necessary)

; Optional Logging and Debugging settings
monitor_filters = esp32_exception_decoder  ; Decodes exceptions and crashes in logs
